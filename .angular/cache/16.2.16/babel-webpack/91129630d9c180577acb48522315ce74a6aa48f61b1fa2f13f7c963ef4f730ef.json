{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../comic/services/comic.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = function (a1) {\n  return [\"/comic\", a1];\n};\nfunction MainContent_ng_container_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"div\", 8)(3, \"span\");\n    i0.ɵɵtext(4, \" Rating: \");\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(7, \"img\", 9);\n    i0.ɵɵelementStart(8, \"div\", 10)(9, \"h3\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"slice\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const c_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(13, _c0, c_r4.id));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(c_r4.averageRating > 0 ? c_r4.averageRating + \" \\u2B50\" : \"Not rated yet\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", c_r4.thumbnail ? c_r4.thumbnail : \"assets/default-image.jpg\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(((c_r4 == null ? null : c_r4.name) || \"\").length > 8 ? i0.ɵɵpipeBind3(11, 6, c_r4 == null ? null : c_r4.name, 0, 8) + \"...\" : c_r4 == null ? null : c_r4.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", c_r4 == null ? null : c_r4.comicCategory == null ? null : c_r4.comicCategory.name, \" / \", i0.ɵɵpipeBind2(14, 10, c_r4 == null ? null : c_r4.onSaleDate, \"dd/MM/yyyy\"), \"\");\n  }\n}\nfunction MainContent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 4);\n    i0.ɵɵtemplate(2, MainContent_ng_container_2_div_2_Template, 15, 15, \"div\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const lastestComic_r2 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", lastestComic_r2);\n  }\n}\nfunction MainContent_ng_container_6_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelement(1, \"img\", 21);\n    i0.ɵɵelementStart(2, \"div\", 22)(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"small\", 23);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"small\", 24);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const c_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", c_r8.thumbnail ? c_r8.thumbnail : \"assets/default-image.jpg\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(9, _c0, c_r8.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r8.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind2(7, 6, c_r8.onSaleDate, \"dd/MM/yyyy\"), \" - \", c_r8.name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Rating: \", c_r8.averageRating > 0 ? c_r8.averageRating + \" \\u2B50\" : \"Not rated yet\", \" \");\n  }\n}\nfunction MainContent_ng_container_6_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelement(1, \"img\", 21);\n    i0.ɵɵelementStart(2, \"div\", 22)(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"small\", 23);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"small\", 24);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const c_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", c_r9.thumbnail || \"assets/default-image.jpg\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(9, _c0, c_r9.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r9.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind2(7, 6, c_r9.onSaleDate, \"dd/MM/yyyy\"), \" - \", c_r9.name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Rating: \", c_r9.averageRating > 0 ? c_r9.averageRating + \" \\u2B50\" : \"Not rated yet\", \" \");\n  }\n}\nfunction MainContent_ng_container_6_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 17)(1, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function MainContent_ng_container_6_li_14_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const page_r10 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.onPageChange(page_r10));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const page_r10 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", ctx_r7.pageNumber === page_r10)(\"disabled\", page_r10 === \"...\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", page_r10 === \"...\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", page_r10, \" \");\n  }\n}\nfunction MainContent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0, 11);\n    i0.ɵɵelementStart(1, \"div\", 12)(2, \"div\", 13)(3, \"div\", 14);\n    i0.ɵɵtemplate(4, MainContent_ng_container_6_div_4_Template, 10, 11, \"div\", 15);\n    i0.ɵɵpipe(5, \"slice\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 14);\n    i0.ɵɵtemplate(7, MainContent_ng_container_6_div_7_Template, 10, 11, \"div\", 15);\n    i0.ɵɵpipe(8, \"slice\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"nav\")(10, \"ul\", 16)(11, \"li\", 17)(12, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function MainContent_ng_container_6_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.onPageChange(ctx_r13.pageNumber - 1));\n    });\n    i0.ɵɵtext(13, \"Previous\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(14, MainContent_ng_container_6_li_14_Template, 3, 6, \"li\", 19);\n    i0.ɵɵelementStart(15, \"li\", 17)(16, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function MainContent_ng_container_6_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.onPageChange(ctx_r15.pageNumber + 1));\n    });\n    i0.ɵɵtext(17, \"Next\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(5, 7, ctx_r1.comics, 0, ctx_r1.comics.length / 2));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(8, 11, ctx_r1.comics, ctx_r1.comics.length / 2, ctx_r1.comics.length));\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"disabled\", ctx_r1.pageNumber === 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.paginationPages);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"disabled\", ctx_r1.pageNumber === ctx_r1.totalPages);\n  }\n}\nlet MainContent = /*#__PURE__*/(() => {\n  class MainContent {\n    constructor(comicService, route) {\n      this.comicService = comicService;\n      this.route = route;\n      this.comics = [];\n      this.totalItems = 0;\n      this.totalPages = 0;\n      this.pageNumber = 1;\n      this.pageSize = 8;\n      this.paginationPages = [];\n    }\n    ngOnDestroy() {\n      if (this.comicsSubscription) {\n        this.comicsSubscription.unsubscribe();\n      }\n    }\n    ngOnInit() {\n      this.loadComics();\n      this.lastestComic$ = this.comicService.getLastestComic();\n    }\n    updatePagination() {\n      const pageLinks = []; // Khai báo kiểu Array<string | number>\n      // Always show the first page\n      pageLinks.push(1);\n      // Show \"...\" if the pages are too many\n      if (this.pageNumber > 3) {\n        pageLinks.push('...');\n      }\n      // Show nearby pages\n      for (let i = Math.max(2, this.pageNumber - 2); i <= Math.min(this.totalPages - 1, this.pageNumber + 2); i++) {\n        pageLinks.push(i);\n      }\n      // Show \"...\" if the pages are too many\n      if (this.pageNumber < this.totalPages - 2) {\n        pageLinks.push('...');\n      }\n      // Always show the last page\n      if (this.totalPages > 1) {\n        pageLinks.push(this.totalPages);\n      }\n      this.paginationPages = pageLinks;\n    }\n    onPageChange(page) {\n      if (page === '...') return; // Do nothing for \"...\"\n      this.pageNumber = page; // Chuyển về kiểu number \n      this.loadComics();\n    }\n    loadComics() {\n      this.route.queryParams.subscribe(params => {\n        this.comicsSubscription = this.comicService.getAllComic('', '', this.pageNumber, this.pageSize).subscribe({\n          next: response => {\n            this.comics = response.comics;\n            this.totalItems = response.totalItems;\n            this.totalPages = response.totalPages;\n            console.log('Comics:', this.comics);\n            console.log('Total items:', this.totalItems);\n            console.log('Total pages:', this.totalPages);\n            this.updatePagination();\n          },\n          error: error => {\n            console.error('Error loading comics:', error);\n          }\n        });\n      });\n    }\n    static {\n      this.ɵfac = function MainContent_Factory(t) {\n        return new (t || MainContent)(i0.ɵɵdirectiveInject(i1.ComicService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MainContent,\n        selectors: [[\"app-main-content\"]],\n        decls: 7,\n        vars: 4,\n        consts: [[1, \"text-white\"], [4, \"ngIf\"], [1, \"text-white\", \"mt-4\"], [\";\", \"\", \"else\", \"\", \"nodata\", \"\", 4, \"ngIf\"], [1, \"row\", \"g-3\"], [\"class\", \"col-md-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-2\"], [1, \"card\", 3, \"routerLink\"], [1, \"rating\"], [3, \"src\"], [1, \"card-content\"], [\";\", \"\", \"else\", \"\", \"nodata\", \"\"], [1, \"mt-4\"], [1, \"row\", \"g-3\", 2, \"cursor\", \"pointer\"], [1, \"col-md-6\"], [\"class\", \"d-flex mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"pagination\", \"justify-content-center\", \"mt-3\"], [1, \"page-item\"], [1, \"page-link\", 3, \"click\"], [\"class\", \"page-item\", 3, \"active\", \"disabled\", 4, \"ngFor\", \"ngForOf\"], [1, \"d-flex\", \"mb-3\"], [1, \"me-3\", 2, \"width\", \"70px\", \"height\", \"auto\", \"border-radius\", \"5px\", 3, \"src\"], [2, \"line-height\", \"1\", 3, \"routerLink\"], [2, \"color\", \"#83848f\", \"font-weight\", \"bold\"], [1, \"mt-1\", 2, \"display\", \"block\"], [1, \"page-link\", 3, \"disabled\", \"click\"]],\n        template: function MainContent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"h3\", 0);\n            i0.ɵɵtext(1, \"Hot new releases in comics\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(2, MainContent_ng_container_2_Template, 3, 1, \"ng-container\", 1);\n            i0.ɵɵpipe(3, \"async\");\n            i0.ɵɵelementStart(4, \"h3\", 2);\n            i0.ɵɵtext(5, \"The newest comic releases\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(6, MainContent_ng_container_6_Template, 18, 15, \"ng-container\", 3);\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 2, ctx.lastestComic$));\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.comics);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i2.RouterLink, i3.AsyncPipe, i3.SlicePipe, i3.DatePipe],\n        styles: [\".pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#343a40;color:#fff;border:none}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{background-color:#5a6268;color:#fff;border:none}\"]\n      });\n    }\n  }\n  return MainContent;\n})();\nexport { MainContent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}